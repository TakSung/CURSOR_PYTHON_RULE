# 포스트메이블 게임 "방과 후 생존" 기획서에 적절한 개발 아키텍처 제안

개발 환경은 Python + Pygame 기반이며, 단순하고 메뉴가 없고 간단한 게임 구조를 가지는 포맷으로 다음과 같은 아키텍처들을 추천합니다.

---

## 1. 게임 전체 구조: Entity–Component–System (ECS)

### ▶️ 적절 단위:

* 게임 방식의 "그래프 게임 전체 구조"
* 테스트 후 몬스터, 적, 투사체가 다수 출현되기 때문에, 데이터가 많은 복잡 구조가 필요

### ▶️ ECS 적용 부위:

* **Entity**: 유저 캐릭터, 적, 투사체, 아이템 등
* **Component**: HP, 이동 속도, 이동 방향, 공격 속도, 투사체 상태 등 "정적 속성"
* **System**: 이동 시스템, 공격 시스템, 상태 체크, 반응 처리 시스템 등

---

## 2. AI 행동 설계: Finite State Machine (FSM)

### ▶️ 적절 단위:

* 교장 선생님, 버스 등이 가지는 "시간에 따른 행동" 구조
* AI 적이나 보스의 회피/공격/정지 등의 상태 전이가 필요한 경우

### ▶️ 적용 단위:

* 버스가 "순찰" → "공격" → "회피" 상태로 상황에 따라 전환
* 적의 상태 (HP, 플레이어 위치 등)에 따라 "추적"/"공격"/"후퇴" 상태 전이

---

## 3. 아이템 조합 관련: Rule Engine 이용

### ▶️ 적절 단위:

* 보스와의 전투 중 발동되는 "조건부 효과" 혹은 미션/디버프 처리
* 아이템 조합 결과에 따른 효과 처리 등

### ▶️ 적용 단위:

* 조건부 규칙 기반 시스템 (예: 플레이어가 특정 아이템 2개를 조합하면 방어력 증가 등)
* 미션 조건 충족 시 디버프 또는 보너스 발동 처리

---

## 4. 이벤트 처리 구조: Event-Driven Architecture (EDA)

### ▶️ 적절 단위:

* "무엇이 발생했는가?" 중심의 설계가 필요한 상황
* 디버프 발생, 아이템 획득, 적 출현 등 다양한 트리거 상황 발생 시 유용

### ▶️ 적용 단위:

* "가장 멀리 떨어진 곳에서 적 한 명 출현" 이벤트
* "특정 행동 후 디버프 발동" 등의 트리거 중심 처리 구조

---

## 5. 렌더링 및 상태 관리: MVC 또는 MV-Update-Draw 구조

### ▶️ 적절 단위:

* Pygame 기반 게임 루프: Update → Draw → Event → Update 반복 구조 반영

### ▶️ 적용 단위:

* **Model**: 게임 데이터 (플레이어 상태, 몬스터, 투사체 등)
* **View**: 화면 렌더링
* **Controller (Event Loop)**: 사용자 입력 및 이벤트 처리

---

이러한 구조는 각 요소별 책임이 분리되어 있어 단순한 게임에도 명확한 테스트가 가능하며, 확장 시에도 유연하게 대처할 수 있는 장점을 가집니다. 개발자는 게임의 구조적 개념과 로직을 보다 명확히 이해하고 선택적으로 구현할 수 있게 됩니다.
